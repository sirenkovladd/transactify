[env]
'_'.file = ".env"

[tasks.dump_schema]
run = "pg_dump -s postgres://$POSTGRES_USER:$POSTGRES_PASSWORD@$POSTGRES_HOST:5432/$POSTGRES_DB > schema.sql"

[tasks.build_client]
# env = { NODE_ENV = "production" }
run = [
  "rm -rf dist",
  "bun build $([ \"$NODE_ENV\" == \"production\" ] && echo \"--production\") --outdir=dist ./client/index.html",
]
outputs = ["dist/*"]
sources = ["client/*"]

[tools]
bun = "latest"
go = "latest"
